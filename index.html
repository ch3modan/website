<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iaroslav Kosaretskii - Portfolio</title>
    <!-- New Fern Favicon -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath fill='%2310B981' d='M50 95V5s5 3 5 15-5 12-5 15 5 3 5 15-5 12-5 15M50 5s-5 3-5 15 5 12 5 15-5 3-5 15 5 12 5 15m10-55a10 10 0 01-10 10 10 10 0 01-10-10m20 20a10 10 0 01-10 10 10 10 0 01-10-10m20 20a10 10 0 01-10 10 10 10 0 01-10-10m-20-30a10 10 0 0010-10 10 10 0 0010 10m-20 20a10 10 0 0010-10 10 10 0 0010 10m-20 20a10 10 0 0010-10 10 10 0 0010 10' stroke='%2310B981' stroke-width='5' stroke-linecap='round'/%3E%3C/svg%3E">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* Apply Inter font globally */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1a202c; /* gray-900 */
        }
        ::-webkit-scrollbar-thumb {
            background: #10B981; /* green-500 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #059669; /* green-600 */
        }
        /* Hide scrollbar for specific elements if needed, e.g., main scroll container */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

        /* Keyframe for wiggle animation */
        @keyframes wiggle {
          0%, 100% { transform: rotate(-3deg); }
          50% { transform: rotate(3deg); }
        }
        .animate-wiggle {
          animation: wiggle 3s ease-in-out infinite;
        }

        /* Game of Life Canvas Styling */
        #gameOfLifeCanvas {
            cursor: pointer;
            border: 1px solid #374151; /* gray-700 */
            border-radius: 0.5rem;
        }
        
        /* Styles from original style.css for completeness */
        .generative-critter-canvas {
            image-rendering: pixelated; /* For crisp pixel art */
        }
        #floatingCritters {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* Allow clicks to pass through */
        }
        .floating-critter {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none; /* Allow clicks to pass through */
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-300 font-sans leading-normal tracking-normal h-screen w-screen flex flex-col overflow-hidden">
    <div class="fixed inset-0 z-0 pointer-events-none">
        <canvas id="barnsleyFernCanvas" class="w-full h-full"></canvas>
        <div id="floatingCritters" class="w-full h-full opacity-50"></div>
    </div>

    <div class="relative z-40">
        <header id="mainHeader" class="fixed top-0 left-0 right-0 z-40 transition-all duration-300 bg-transparent">
            <nav class="max-w-5xl mx-auto px-6 py-3 flex justify-between items-center">
                <a href="#home" class="text-xl font-bold text-white flex items-center gap-2">
                    <!-- New Fern Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-leaf text-green-400">
                        <path d="M12 22V2"/>
                        <path d="M12 2c4 0 8 2 8 8s-4 8-8 8"/>
                        <path d="M12 2c-4 0-8 2-8 8s4 8 8 8"/>
                        <path d="M16 6a4 4 0 1 0-8 0"/>
                        <path d="M18 12a6 6 0 1 0-12 0"/>
                        <path d="M20 18a8 8 0 1 0-16 0"/>
                    </svg>
                    <span class="hidden sm:inline">Iaroslav Kosaretskii</span>
                </a>
                <div class="hidden md:flex items-center gap-2 bg-gray-800/50 border border-gray-700 rounded-full px-2 py-1">
                    <a href="#home" class="nav-link flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-colors duration-300 text-gray-300 hover:bg-gray-700 hover:text-white" data-section="home">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-home"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                        Home
                    </a>
                    <a href="#about" class="nav-link flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-colors duration-300 text-gray-300 hover:bg-gray-700 hover:text-white" data-section="about">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                        About
                    </a>
                    <a href="#projects" class="nav-link flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-colors duration-300 text-gray-300 hover:bg-gray-700 hover:text-white" data-section="projects">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-code"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
                        Projects
                    </a>
                    <a href="#contact" class="nav-link flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-colors duration-300 text-gray-300 hover:bg-gray-700 hover:text-white" data-section="contact">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                        Contact
                    </a>
                </div>
                <div class="hidden md:flex items-center gap-4">
                    <a href="https://github.com/ch3modan" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-green-400 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.2c3.5 0 4.1-2.2 4.1-4.9V8.6c0-1.5-.7-2.9-2.2-3.8A7.6 7.6 0 0 0 12 2a7.6 7.6 0 0 0-2.8.6c-1.5.9-2.2 2.3-2.2 3.8V8.6c0 2.7.6 4.9 4.1 4.9a4.8 4.8 0 0 0-1 3.2v4"/><path d="M9 18c-3.3-1-4.3-4.5-4.3-4.5"/><path d="M15 18c3.3-1 4.3-4.5 4.3-4.5"/></svg>
                    </a>
                    <a href="https://www.linkedin.com/in/iaroslav-kosaretskii-b75844327" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-green-400 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/></svg>
                    </a>
                </div>
            </nav>
        </header>
    </div>
    <div id="critterCorner"></div>

    <main id="scrollContainer" class="relative z-10 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar">
        <section id="home" class="relative w-full max-w-5xl mx-auto py-16 md:py-24 px-6 min-h-screen flex items-center justify-center text-center">
            <div class="relative">
                <div class="absolute -inset-2 bg-gradient-to-r from-green-600 to-cyan-600 rounded-lg blur-xl opacity-20"></div>
                <div class="relative bg-gray-900 bg-opacity-80 backdrop-blur-md border border-gray-700 rounded-lg p-8 md:p-16">
                    <h1 class="text-4xl sm:text-5xl md:text-7xl font-extrabold text-white tracking-tighter mb-4">Iaroslav Kosaretskii</h1>
                    <p class="text-lg md:text-xl text-green-300 font-mono">Aspiring Bioinformatician & Programming Enthusiast</p>
                </div>
            </div>
        </section>

        <section id="about" class="relative w-full max-w-5xl mx-auto py-16 md:py-24 px-6">
            <h2 class="text-3xl md:text-4xl font-bold mb-12 text-center relative text-white">About Me<span class="absolute -bottom-3 left-1/2 transform -translate-x-1/2 w-20 h-1 bg-green-400"></span></h2>
            <div class="grid md:grid-cols-5 gap-12 items-start">
                <div class="md:col-span-3 bg-gray-900/50 p-8 rounded-lg border border-gray-800">
                    <h3 class="text-2xl font-bold text-white mb-4">Who I Am</h3>
                    <p class="text-gray-400 leading-relaxed">I am a dedicated student pursuing a Bachelor's degree in Bioinformatics at Johann Wolfgang Goethe-University Frankfurt am Main. With a strong foundation in both programming and academic excellence, I bring a blend of technical skills and scientific curiosity to my bioinformatics projects.</p>
                </div>
                <div class="md:col-span-2 space-y-6">
                    <div class="bg-gray-900/50 p-6 rounded-lg border border-gray-800">
                        <h3 class="text-xl font-bold text-white mb-4">Education</h3>
                        <p class="font-semibold text-green-400">Bachelor in Bioinformatics</p>
                        <p class="text-gray-400">Johann Wolfgang Goethe-University Frankfurt am Main</p>
                        <p class="text-gray-500 text-sm">2024-2027</p>
                    </div>
                    <div class="bg-gray-900/50 p-6 rounded-lg border border-gray-800">
                        <h3 class="text-xl font-bold text-white mb-4">Languages</h3>
                        <div class="flex flex-wrap gap-2">
                            <div class="bg-gray-800 border border-gray-700 text-green-300 text-sm font-mono py-1.5 px-4 rounded-full shadow-md transition-all duration-300 hover:bg-green-900 hover:text-white hover:shadow-lg hover:shadow-green-500/20">Russian (Native)</div>
                            <div class="bg-gray-800 border border-gray-700 text-green-300 text-sm font-mono py-1.5 px-4 rounded-full shadow-md transition-all duration-300 hover:bg-green-900 hover:text-white hover:shadow-lg hover:shadow-green-500/20">German (C1)</div>
                            <div class="bg-gray-800 border border-gray-700 text-green-300 text-sm font-mono py-1.5 px-4 rounded-full shadow-md transition-all duration-300 hover:bg-green-900 hover:text-white hover:shadow-lg hover:shadow-green-500/20">English (C1)</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-12">
                <h3 class="text-2xl font-bold text-white mb-6 text-center">My Tech Stack & Skills</h3>
                <div class="flex flex-wrap justify-center gap-3">
                    <div class="bg-gray-800 border border-gray-700 text-green-300 text-sm font-mono py-1.5 px-4 rounded-full shadow-md transition-all duration-300 hover:bg-green-900 hover:text-white hover:shadow-lg hover:shadow-green-500/20">Python</div>
                    <div class="bg-gray-800 border border-gray-700 text-green-300 text-sm font-mono py-1.5 px-4 rounded-full shadow-md transition-all duration-300 hover:bg-green-900 hover:text-white hover:shadow-lg hover:shadow-green-500/20">NumPy</div>
                    <div class="bg-gray-800 border border-gray-700 text-green-300 text-sm font-mono py-1.5 px-4 rounded-full shadow-md transition-all duration-300 hover:bg-green-900 hover:text-white hover:shadow-lg hover:shadow-green-500/20">Pandas</div>
                    <div class="bg-gray-800 border border-gray-700 text-green-300 text-sm font-mono py-1.5 px-4 rounded-full shadow-md transition-all duration-300 hover:bg-green-900 hover:text-white hover:shadow-lg hover:shadow-green-500/20">Linux Administration</div>
                    <div class="bg-gray-800 border border-gray-700 text-green-300 text-sm font-mono py-1.5 px-4 rounded-full shadow-md transition-all duration-300 hover:bg-green-900 hover:text-white hover:shadow-lg hover:shadow-green-500/20">Git</div>
                    <div class="bg-gray-800 border border-gray-700 text-green-300 text-sm font-mono py-1.5 px-4 rounded-full shadow-md transition-all duration-300 hover:bg-green-900 hover:text-white hover:shadow-lg hover:shadow-green-500/20">HTML/CSS</div>
                    <div class="bg-gray-800 border border-gray-700 text-green-300 text-sm font-mono py-1.5 px-4 rounded-full shadow-md transition-all duration-300 hover:bg-green-900 hover:text-white hover:shadow-lg hover:shadow-green-500/20">React</div>
                    <div class="bg-gray-800 border border-gray-700 text-green-300 text-sm font-mono py-1.5 px-4 rounded-full shadow-md transition-all duration-300 hover:bg-green-900 hover:text-white hover:shadow-lg hover:shadow-green-500/20">JavaScript</div>
                </div>
            </div>
        </section>

        <section id="projects" class="relative w-full max-w-5xl mx-auto py-16 md:py-24 px-6">
            <h2 class="text-3xl md:text-4xl font-bold mb-12 text-center relative text-white">My Projects<span class="absolute -bottom-3 left-1/2 transform -translate-x-1/2 w-20 h-1 bg-green-400"></span></h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-gray-900/50 border border-gray-800 rounded-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:shadow-green-900/30 hover:border-green-700 flex flex-col">
                    <div class="p-6 flex-grow">
                        <h3 class="text-xl font-bold text-white mb-2">Conway's Game of Life</h3>
                        <p class="text-gray-400 mb-4 text-sm flex-grow">An interactive simulation of a cellular automaton that creates complex patterns from simple rules. Features multiple rule sets.</p>
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="text-xs font-mono bg-gray-800 text-cyan-300 py-1 px-3 rounded-full">JavaScript</span>
                            <span class="text-xs font-mono bg-gray-800 text-cyan-300 py-1 px-3 rounded-full">HTML Canvas</span>
                            <span class="text-xs font-mono bg-gray-800 text-cyan-300 py-1 px-3 rounded-full">Algorithm</span>
                        </div>
                    </div>
                    <div class="bg-gray-800/50 px-6 py-4 flex justify-end items-center gap-4">
                         <a href="#game-of-life" class="text-gray-400 hover:text-green-400 transition-colors flex items-center gap-2 text-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-target"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>
                            Try It Out
                        </a>
                    </div>
                </div>
                <div class="bg-gray-900/50 border border-gray-800 rounded-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:shadow-green-900/30 hover:border-green-700 flex flex-col">
                    <div class="p-6 flex-grow">
                        <h3 class="text-xl font-bold text-white mb-2">Bio-Data Analyzer</h3>
                        <p class="text-gray-400 mb-4 text-sm flex-grow">A command-line tool developed in Python using Pandas and NumPy to process and analyze large biological datasets efficiently.</p>
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="text-xs font-mono bg-gray-800 text-cyan-300 py-1 px-3 rounded-full">Python</span>
                            <span class="text-xs font-mono bg-gray-800 text-cyan-300 py-1 px-3 rounded-full">Pandas</span>
                            <span class="text-xs font-mono bg-gray-800 text-cyan-300 py-1 px-3 rounded-full">NumPy</span>
                            <span class="text-xs font-mono bg-gray-800 text-cyan-300 py-1 px-3 rounded-full">CLI</span>
                        </div>
                    </div>
                    <div class="bg-gray-800/50 px-6 py-4 flex justify-end items-center gap-4">
                        <a href="#" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-green-400 transition-colors flex items-center gap-2 text-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.2c3.5 0 4.1-2.2 4.1-4.9V8.6c0-1.5-.7-2.9-2.2-3.8A7.6 7.6 0 0 0 12 2a7.6 7.6 0 0 0-2.8.6c-1.5.9-2.2 2.3-2.2 3.8V8.6c0 2.7.6 4.9 4.1 4.9a4.8 4.8 0 0 0-1 3.2v4"/><path d="M9 18c-3.3-1-4.3-4.5-4.3-4.5"/><path d="M15 18c3.3-1 4.3-4.5 4.3-4.5"/></svg>
                            Code
                        </a>
                    </div>
                </div>
                <div class="bg-gray-900/50 border border-gray-800 rounded-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:shadow-green-900/30 hover:border-green-700 flex flex-col">
                    <div class="p-6 flex-grow">
                        <h3 class="text-xl font-bold text-white mb-2">Personal Portfolio Website</h3>
                        <p class="text-gray-400 mb-4 text-sm flex-grow">This very website, built with HTML, Tailwind, and vanilla JS to create a modern, responsive, and professional online presence.</p>
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="text-xs font-mono bg-gray-800 text-cyan-300 py-1 px-3 rounded-full">HTML</span>
                            <span class="text-xs font-mono bg-gray-800 text-cyan-300 py-1 px-3 rounded-full">Tailwind CSS</span>
                            <span class="text-xs font-mono bg-gray-800 text-cyan-300 py-1 px-3 rounded-full">JavaScript</span>
                        </div>
                    </div>
                    <div class="bg-gray-800/50 px-6 py-4 flex justify-end items-center gap-4">
                        <a href="#" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-green-400 transition-colors flex items-center gap-2 text-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.2c3.5 0 4.1-2.2 4.1-4.9V8.6c0-1.5-.7-2.9-2.2-3.8A7.6 7.6 0 0 0 12 2a7.6 7.6 0 0 0-2.8.6c-1.5.9-2.2 2.3-2.2 3.8V8.6c0 2.7.6 4.9 4.1 4.9a4.8 4.8 0 0 0-1 3.2v4"/><path d="M9 18c-3.3-1-4.3-4.5-4.3-4.5"/><path d="M15 18c3.3-1 4.3-4.5 4.3-4.5"/></svg>
                            Code
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section id="game-of-life" class="relative w-full max-w-5xl mx-auto py-16 md:py-24 px-6 text-center">
            <h2 class="text-3xl md:text-4xl font-bold mb-12 relative text-white">Interactive Cellular Automaton<span class="absolute -bottom-3 left-1/2 transform -translate-x-1/2 w-20 h-1 bg-green-400"></span></h2>
            <div class="bg-gray-900/50 p-4 sm:p-8 rounded-lg border border-gray-800 inline-block">
                <canvas id="gameOfLifeCanvas"></canvas>
                <div class="mt-4 flex flex-wrap justify-center items-center gap-x-4 gap-y-2">
                    <span class="text-sm font-mono text-gray-400">Generation: <span id="gol-generation" class="text-green-400">0</span></span>
                    <div class="flex items-center gap-2 bg-gray-800 border border-gray-700 rounded-full p-1">
                        <button id="gol-rules-classic" class="text-xs font-medium py-1 px-3 rounded-full bg-green-600 text-white">Classic</button>
                        <button id="gol-rules-highlife" class="text-xs font-medium py-1 px-3 rounded-full text-gray-400">HighLife</button>
                    </div>
                </div>
                <div class="mt-4 flex flex-wrap justify-center items-center gap-4">
                    <button id="gol-start-pause" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-full transition-all duration-200 shadow-lg shadow-green-500/20 flex items-center gap-2">
                        <svg id="gol-play-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-play"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                        <svg id="gol-pause-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pause hidden"><rect width="4" height="16" x="6" y="4"/><rect width="4" height="16" x="14" y="4"/></svg>
                        <span id="gol-start-pause-text">Start</span>
                    </button>
                    <button id="gol-reset" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-full transition-all duration-200 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-rotate-cw"><path d="M21 2v6h-6"/><path d="M3 12a9 9 0 0 1 15-6.7L21 8"/><path d="M3 22v-6h6"/><path d="M21 12a9 9 0 0 1-15 6.7L3 16"/></svg>
                        Reset
                    </button>
                    <button id="gol-randomize" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-full transition-all duration-200 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shuffle"><path d="M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22"/><path d="m18 2 4 4-4 4"/><path d="M2 6h1.9c1.5 0 2.9.9 3.6 2.2l.7 1.2c.7 1.3 2.1 2.2 3.6 2.2h2.2"/><path d="m18 22-4-4 4-4"/></svg>
                        Randomize
                    </button>
                </div>
                 <p class="text-gray-500 text-sm mt-4 font-mono">Click on the grid to add or remove cells.</p>
            </div>
        </section>

        <section id="contact" class="relative w-full max-w-5xl mx-auto py-16 md:py-24 px-6">
            <h2 class="text-3xl md:text-4xl font-bold mb-12 text-center relative text-white">Get In Touch<span class="absolute -bottom-3 left-1/2 transform -translate-x-1/2 w-20 h-1 bg-green-400"></span></h2>
            <div class="grid md:grid-cols-2 gap-12">
                <div class="space-y-4">
                    <h3 class="text-2xl font-bold text-white">Let's Connect</h3>
                    <p class="text-gray-400">I'm currently seeking new opportunities and am open to collaborations. Feel free to reach out if you have a project in mind, want to discuss bioinformatics, or just want to say hello!</p>
                    <div class="space-y-4 pt-4">
                        <a href="mailto:cheemsthedoge@gmail.com" class="flex items-center gap-4 text-gray-300 hover:text-green-400 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail text-green-500"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                            <span>cheemsthedoge@gmail.com</span>
                        </a>
                        <a href="tel:+491741848588" class="flex items-center gap-4 text-gray-300 hover:text-green-400 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-phone text-green-500"><path d="M22 16.92v3a2 2 0 0 1-2.18 2.02 15.79 15.79 0 0 1-8.82-5.55 15.79 15.79 0 0 1-5.55-8.82A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                            <span>+49 174 184 8588</span>
                        </a>
                        <div class="flex items-center gap-4 text-gray-300">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-map-pin text-green-500"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>
                            <span>Frankfurt am Main, Germany</span>
                        </div>
                    </div>
                </div>
                <form action="https://formspree.io/f/xwpqvkrw" method="POST" class="bg-gray-900/50 p-8 rounded-lg border border-gray-800 space-y-4">
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-400 mb-1">Your email:</label>
                        <input type="email" id="email" name="email" required class="w-full bg-gray-800 border border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-green-500">
                    </div>
                    <div>
                        <label for="message" class="block text-sm font-medium text-gray-400 mb-1">Your message:</label>
                        <textarea id="message" name="message" rows="4" required class="w-full bg-gray-800 border border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-green-500"></textarea>
                    </div>
                    <button type="submit" class="w-full bg-green-500 text-gray-900 font-bold py-3 px-6 rounded-full transition-transform duration-300 hover:scale-105 shadow-lg shadow-green-500/20">Send</button>
                </form>
            </div>
        </section>

        <footer class="bg-gray-900 border-t border-gray-800">
            <div class="max-w-5xl mx-auto py-6 px-6 text-center text-gray-500">
                <div class="flex justify-center gap-6 mb-4">
                    <a href="https://github.com/ch3modan" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-green-400 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github"><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.2c3.5 0 4.1-2.2 4.1-4.9V8.6c0-1.5-.7-2.9-2.2-3.8A7.6 7.6 0 0 0 12 2a7.6 7.6 0 0 0-2.8.6c-1.5.9-2.2 2.3-2.2 3.8V8.6c0 2.7.6 4.9 4.1 4.9a4.8 4.8 0 0 0-1 3.2v4"/><path d="M9 18c-3.3-1-4.3-4.5-4.3-4.5"/><path d="M15 18c3.3-1 4.3-4.5 4.3-4.5"/></svg>
                    </a>
                    <a href="https://www.linkedin.com/in/iaroslav-kosaretskii-b75844327" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-green-400 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/></svg>
                    </a>
                    <a href="mailto:cheemsthedoge@gmail.com" class="text-gray-400 hover:text-green-400 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                    </a>
                </div>
                <p class="text-sm">&copy; 2025 Iaroslav Kosaretskii. All Rights Reserved.</p>
                <p class="text-xs mt-2 font-mono">Built with HTML, CSS & JavaScript</p>
            </div>
        </footer>
    </main>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        document.addEventListener('DOMContentLoaded', () => {
            // --- Main App Logic from original script.js ---
            const mainHeader = document.getElementById('mainHeader');
            const scrollContainer = document.getElementById('scrollContainer');
            const navLinksElements = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('section[id]');

            let isScrolled = false;
            let activeSection = 'home';

            const handleScroll = () => {
                // Header scroll effect
                const scrolled = scrollContainer.scrollTop > 10;
                if (scrolled !== isScrolled) {
                    isScrolled = scrolled;
                    if (isScrolled) {
                        mainHeader.classList.add('bg-gray-900/90', 'shadow-lg', 'shadow-black/20', 'border-b', 'border-gray-800');
                        mainHeader.classList.remove('bg-transparent');
                    } else {
                        mainHeader.classList.remove('bg-gray-900/90', 'shadow-lg', 'shadow-black/20', 'border-b', 'border-gray-800');
                        mainHeader.classList.add('bg-transparent');
                    }
                }

                // Active navigation link highlighting
                const scrollPosition = scrollContainer.scrollTop + window.innerHeight / 2; // Mid-viewport scroll position

                sections.forEach(section => {
                    if (scrollPosition >= section.offsetTop && scrollPosition < section.offsetTop + section.offsetHeight) {
                        const currentSectionId = section.id;
                        if (currentSectionId !== activeSection) {
                            activeSection = currentSectionId;
                            navLinksElements.forEach(link => {
                                if (link.dataset.section === activeSection) {
                                    link.classList.add('bg-green-500', 'text-gray-900');
                                    link.classList.remove('text-gray-300', 'hover:bg-gray-700', 'hover:text-white');
                                } else {
                                    link.classList.remove('bg-green-500', 'text-gray-900');
                                    link.classList.add('text-gray-300', 'hover:bg-gray-700', 'hover:text-white');
                                }
                            });
                        }
                    }
                });
            };

            if (scrollContainer) {
                scrollContainer.addEventListener('scroll', handleScroll);
                handleScroll();
            }

            // --- Generative Critter Component ---
            function createGenerativeCritter(container, seed) {
                const canvas = document.createElement('canvas');
                canvas.className = "w-full h-full generative-critter-canvas";
                container.appendChild(canvas);
                const ctx = canvas.getContext('2d');
                const size = 10;
                canvas.width = size;
                canvas.height = size;

                let currentSeed = seed;
                let random = () => {
                    var x = Math.sin(currentSeed++) * 10000;
                    return x - Math.floor(x);
                };

                const r = Math.floor(random() * 256);
                const g = Math.floor(random() * 256);
                const b = Math.floor(random() * 256);
                const bodyColor = `rgb(${r}, ${g}, ${b})`;
                const accentColor = `rgb(${255 - r}, ${255 - g}, ${255 - b})`;

                ctx.clearRect(0, 0, size, size);
                for (let y = 0; y < size; y++) {
                    for (let x = 0; x < Math.ceil(size / 2); x++) {
                        if (random() > 0.5) {
                            ctx.fillStyle = bodyColor;
                            ctx.fillRect(x, y, 1, 1);
                            ctx.fillRect(size - 1 - x, y, 1, 1);
                        }
                    }
                }
                if (random() > 0.3) {
                    const eyeX = Math.floor(random() * (size / 2 - 1)) + 1;
                    const eyeY = Math.floor(random() * (size - 2)) + 1;
                    ctx.fillStyle = accentColor;
                    ctx.fillRect(eyeX, eyeY, 1, 1);
                    ctx.fillRect(size - 1 - eyeX, eyeY, 1, 1);
                }
            }

            // --- Critter Corner ---
            const critterGreetings = ["Welcome to the digital ecosystem!", "Analyzing visitor data... you seem friendly.", "01001000 01100101 01101100 01101100 01101111!", "I was just generated. What are the odds?", "Greetings, carbon-based lifeform."];

            function setupCritterCorner() {
                const critterCornerDiv = document.getElementById('critterCorner');
                if (!critterCornerDiv) return;

                let bubbleVisible = false;
                let critterSeed = Math.random();
                let greeting = critterGreetings[Math.floor(Math.random() * critterGreetings.length)];

                const renderCritterCorner = () => {
                    critterCornerDiv.innerHTML = `
                        <div class="fixed bottom-4 right-4 z-50 flex items-end gap-3 pointer-events-none">
                            <div id="critterBubble" class="transition-all duration-500 ${bubbleVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'}">
                                <div class="relative bg-white text-gray-800 p-4 rounded-lg shadow-lg max-w-xs font-mono border-2 border-green-400 pointer-events-auto">
                                    <p class="text-sm">${greeting}</p>
                                    <div class="absolute right-0 bottom-2 transform translate-x-1/2 rotate-45 w-4 h-4 bg-white border-r-2 border-b-2 border-green-400"></div>
                                    <button id="closeCritterBubble" class="absolute top-1 right-1 text-gray-400 hover:text-gray-800" aria-label="Close greeting">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                                    </button>
                                </div>
                            </div>
                            <div id="critterCanvasContainer" class="w-24 h-24 cursor-pointer transition-transform duration-300 hover:scale-110 animate-wiggle pointer-events-auto" title="Say hi!"></div>
                        </div>
                    `;

                    const critterCanvasContainer = document.getElementById('critterCanvasContainer');
                    if (critterCanvasContainer) {
                        critterCanvasContainer.innerHTML = ''; // Clear previous critter
                        createGenerativeCritter(critterCanvasContainer, critterSeed);
                        critterCanvasContainer.onclick = () => {
                            bubbleVisible = !bubbleVisible;
                            renderCritterCorner();
                        };
                    }

                    const closeButton = document.getElementById('closeCritterBubble');
                    if (closeButton) {
                        closeButton.onclick = () => {
                            bubbleVisible = false;
                            renderCritterCorner();
                        };
                    }
                    lucide.createIcons(); // Re-create icons after DOM update
                };

                setTimeout(() => {
                    critterCornerDiv.style.display = 'block'; // Make visible
                    setTimeout(() => {
                        bubbleVisible = true;
                        renderCritterCorner();
                    }, 1000); // Delay bubble appearance
                }, 1500); // Delay critter appearance

                renderCritterCorner(); // Initial render
            }

            // --- Barnsley Fern Bush Background ---
            function setupBarnsleyFernCanvas() {
                const canvas = document.getElementById('barnsleyFernCanvas');
                if (!canvas) return;
                const ctx = canvas.getContext('2d');
                let animationFrameId;

                const resizeCanvas = () => {
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                };

                resizeCanvas();
                window.addEventListener('resize', resizeCanvas);

                const numFerns = 8;
                const ferns = [];
                const edges = ['left', 'right', 'top', 'bottom'];

                for (let i = 0; i < numFerns; i++) {
                    const edge = edges[i % 4]; // Cycle through edges to get variety
                    let originX, originY, rotation;

                    switch (edge) {
                        case 'left':
                            originX = 0;
                            originY = Math.random() * canvas.height;
                            rotation = -Math.PI / 2; // Pointing right
                            break;
                        case 'right':
                            originX = canvas.width;
                            originY = Math.random() * canvas.height;
                            rotation = Math.PI / 2; // Pointing left
                            break;
                        case 'top':
                            originX = Math.random() * canvas.width;
                            originY = 0;
                            rotation = Math.PI; // Pointing down
                            break;
                        case 'bottom':
                        default:
                            originX = Math.random() * canvas.width;
                            originY = canvas.height;
                            rotation = 0; // Pointing up
                            break;
                    }

                    ferns.push({
                        x: 0,
                        y: 0,
                        originX: originX,
                        originY: originY,
                        rotation: rotation,
                        scale: Math.random() * 0.8 + 0.6, // Slightly larger for a "closer" feel
                        color: `rgba(57, ${Math.floor(Math.random() * 100 + 155)}, 20, 0.5)`
                    });
                }

                const drawPoint = (fern) => {
                    ctx.fillStyle = fern.color;
                    const canvasScale = canvas.height / 10; // Adjust overall size of ferns

                    // Apply rotation to the point
                    const cosR = Math.cos(fern.rotation);
                    const sinR = Math.sin(fern.rotation);
                    const rotatedX = fern.x * cosR - fern.y * sinR;
                    const rotatedY = fern.x * sinR + fern.y * cosR;
                    
                    // The fern naturally grows "up" (positive Y). For canvas, positive Y is down.
                    // So we subtract the Y component to make it grow up on the screen.
                    const px = fern.originX + (rotatedX * canvasScale * fern.scale);
                    const py = fern.originY - (rotatedY * canvasScale * fern.scale);
                    
                    ctx.fillRect(px, py, 1, 1);
                };

                const nextPoint = (fern) => {
                    const r = Math.random();
                    let nextX, nextY;
                    if (r < 0.01) {
                        nextX = 0;
                        nextY = 0.16 * fern.y;
                    } else if (r < 0.86) {
                        nextX = 0.85 * fern.x + 0.04 * fern.y;
                        nextY = -0.04 * fern.x + 0.85 * fern.y + 1.6;
                    } else if (r < 0.93) {
                        nextX = 0.2 * fern.x - 0.26 * fern.y;
                        nextY = 0.23 * fern.x + 0.22 * fern.y + 1.6;
                    } else {
                        nextX = -0.15 * fern.x + 0.28 * fern.y;
                        nextY = 0.26 * fern.x + 0.24 * fern.y + 0.44;
                    }
                    fern.x = nextX;
                    fern.y = nextY;
                };

                const render = () => {
                    ferns.forEach(fern => {
                        // Draw a batch of points for each fern per frame for performance
                        for (let i = 0; i < 25; i++) {
                            drawPoint(fern);
                            nextPoint(fern);
                        }
                    });
                    animationFrameId = requestAnimationFrame(render);
                };
                render();
            }

            // --- Floating Critters ---
            function setupFloatingCritters() {
                const container = document.getElementById('floatingCritters');
                if (!container) return;

                const critters = [];
                const numCritters = 15;

                for (let i = 0; i < numCritters; i++) {
                    const size = Math.random() * 40 + 20;
                    const critterEl = document.createElement('div');
                    critterEl.className = 'floating-critter';
                    critterEl.style.width = `${size}px`;
                    critterEl.style.height = `${size}px`;
                    container.appendChild(critterEl);

                    const critter = {
                        el: critterEl,
                        x: Math.random() * window.innerWidth,
                        y: Math.random() * window.innerHeight,
                        vx: (Math.random() - 0.5) * 0.5,
                        vy: (Math.random() - 0.5) * 0.5,
                        rotation: Math.random() * 360,
                        rotationSpeed: (Math.random() - 0.5) * 0.2,
                        size: size,
                        seed: Math.random() * 1000,
                    };
                    critters.push(critter);
                    createGenerativeCritter(critterEl, critter.seed);
                }

                let animationFrameId;
                const animate = () => {
                    critters.forEach(c => {
                        c.x += c.vx;
                        c.y += c.vy;
                        c.rotation += c.rotationSpeed;
                        if (c.x < -c.size) c.x = window.innerWidth + c.size;
                        if (c.x > window.innerWidth + c.size) c.x = -c.size;
                        if (c.y < -c.size) c.y = window.innerHeight + c.size;
                        if (c.y > window.innerHeight + c.size) c.y = -c.size;
                        c.el.style.transform = `translate(${c.x}px, ${c.y}px) rotate(${c.rotation}deg)`;
                    });
                    animationFrameId = requestAnimationFrame(animate);
                };
                animate();
            }

            // --- Conway's Game of Life ---
            const golCanvas = document.getElementById('gameOfLifeCanvas');
            if (golCanvas) {
                const ctx = golCanvas.getContext('2d');
                const cellSize = 10;
                const width = 500;
                const height = 300;
                const cols = Math.floor(width / cellSize);
                const rows = Math.floor(height / cellSize);
                const aliveColor = '#10B981';
                const deadColor = '#1f2937';

                golCanvas.width = width;
                golCanvas.height = height;

                let grid;
                let isRunning = false;
                let animationFrameId;
                let generationCount = 0;
                let currentRules = 'classic'; // 'classic' or 'highlife'

                const startPauseButton = document.getElementById('gol-start-pause');
                const startPauseText = document.getElementById('gol-start-pause-text');
                const playIcon = document.getElementById('gol-play-icon');
                const pauseIcon = document.getElementById('gol-pause-icon');
                const resetButton = document.getElementById('gol-reset');
                const randomizeButton = document.getElementById('gol-randomize');
                const generationCounter = document.getElementById('gol-generation');
                const classicRulesButton = document.getElementById('gol-rules-classic');
                const highlifeRulesButton = document.getElementById('gol-rules-highlife');


                const createGrid = () => new Array(cols).fill(null).map(() => new Array(rows).fill(0));
                
                const randomizeGrid = (g) => {
                    for (let i = 0; i < cols; i++) {
                        for (let j = 0; j < rows; j++) {
                            g[i][j] = Math.random() > 0.8 ? 1 : 0;
                        }
                    }
                };
                
                const setGliderGunPattern = (g) => {
                    const pattern = [
                        [24,0],[22,1],[24,1],[12,2],[13,2],[20,2],[21,2],[34,2],[35,2],[11,3],[15,3],[20,3],[21,3],[34,3],[35,3],[0,4],[1,4],[10,4],[16,4],[20,4],[21,4],[0,5],[1,5],[10,5],[14,5],[16,5],[17,5],[22,5],[24,5],[10,6],[16,6],[24,6],[11,7],[15,7],[12,8],[13,8]
                    ];
                    pattern.forEach(([x, y]) => {
                        if (x + 1 < cols && y + 3 < rows) {
                            g[x + 1][y + 3] = 1;
                        }
                    });
                };
                
                const drawGrid = (g) => {
                    ctx.clearRect(0, 0, width, height);
                    for (let i = 0; i < cols; i++) {
                        for (let j = 0; j < rows; j++) {
                            ctx.fillStyle = g[i][j] ? aliveColor : deadColor;
                            ctx.fillRect(i * cellSize, j * cellSize, cellSize, cellSize);
                        }
                    }
                };

                const getNextGeneration = (g) => {
                    const nextGrid = createGrid();
                    for (let i = 0; i < cols; i++) {
                        for (let j = 0; j < rows; j++) {
                            const neighbors = countNeighbors(g, i, j);
                            const isAlive = g[i][j] === 1;

                            if (currentRules === 'classic') {
                                // Classic B3/S23 rules
                                if (isAlive && (neighbors < 2 || neighbors > 3)) {
                                    nextGrid[i][j] = 0; // Dies
                                } else if (!isAlive && neighbors === 3) {
                                    nextGrid[i][j] = 1; // Born
                                } else {
                                    nextGrid[i][j] = g[i][j]; // Stays the same
                                }
                            } else if (currentRules === 'highlife') {
                                // HighLife B36/S23 rules
                                if (isAlive && (neighbors < 2 || neighbors > 3)) {
                                    nextGrid[i][j] = 0; // Dies
                                } else if (!isAlive && (neighbors === 3 || neighbors === 6)) {
                                    nextGrid[i][j] = 1; // Born
                                } else {
                                    nextGrid[i][j] = g[i][j]; // Stays the same
                                }
                            }
                        }
                    }
                    return nextGrid;
                };

                const countNeighbors = (g, x, y) => {
                    let count = 0;
                    for (let i = -1; i <= 1; i++) {
                        for (let j = -1; j <= 1; j++) {
                            if (i === 0 && j === 0) continue;
                            const col = (x + i + cols) % cols;
                            const row = (y + j + rows) % rows;
                            count += g[col][row];
                        }
                    }
                    return count;
                };

                const gameLoop = () => {
                    if (!isRunning) return;
                    grid = getNextGeneration(grid);
                    drawGrid(grid);
                    generationCount++;
                    generationCounter.textContent = generationCount;
                    animationFrameId = setTimeout(() => {
                        requestAnimationFrame(gameLoop);
                    }, 100);
                };

                const toggleCellState = (e) => {
                    const rect = golCanvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const col = Math.floor(x / cellSize);
                    const row = Math.floor(y / cellSize);
                    if (col >= 0 && col < cols && row >= 0 && row < rows) {
                        grid[col][row] = grid[col][row] ? 0 : 1;
                        drawGrid(grid);
                        generationCount = 0;
                        generationCounter.textContent = generationCount;
                    }
                };

                const updateButtonState = () => {
                    if (isRunning) {
                        startPauseText.textContent = 'Pause';
                        playIcon.classList.add('hidden');
                        pauseIcon.classList.remove('hidden');
                    } else {
                        startPauseText.textContent = 'Start';
                        playIcon.classList.remove('hidden');
                        pauseIcon.classList.add('hidden');
                    }
                };

                const resetSimulation = () => {
                    grid = createGrid();
                    setGliderGunPattern(grid);
                    drawGrid(grid);
                    generationCount = 0;
                    generationCounter.textContent = generationCount;
                    if (isRunning) {
                        isRunning = false;
                        updateButtonState();
                        clearTimeout(animationFrameId);
                    }
                };

                startPauseButton.addEventListener('click', () => {
                    isRunning = !isRunning;
                    updateButtonState();
                    if (isRunning) gameLoop();
                    else clearTimeout(animationFrameId);
                });

                resetButton.addEventListener('click', resetSimulation);
                
                randomizeButton.addEventListener('click', () => {
                    grid = createGrid();
                    randomizeGrid(grid);
                    drawGrid(grid);
                    generationCount = 0;
                    generationCounter.textContent = generationCount;
                });
                
                classicRulesButton.addEventListener('click', () => {
                    currentRules = 'classic';
                    classicRulesButton.classList.add('bg-green-600', 'text-white');
                    classicRulesButton.classList.remove('text-gray-400');
                    highlifeRulesButton.classList.remove('bg-green-600', 'text-white');
                    highlifeRulesButton.classList.add('text-gray-400');
                    resetSimulation();
                });
                
                highlifeRulesButton.addEventListener('click', () => {
                    currentRules = 'highlife';
                    highlifeRulesButton.classList.add('bg-green-600', 'text-white');
                    highlifeRulesButton.classList.remove('text-gray-400');
                    classicRulesButton.classList.remove('bg-green-600', 'text-white');
                    classicRulesButton.classList.add('text-gray-400');
                    resetSimulation();
                });

                golCanvas.addEventListener('click', toggleCellState);

                const initGol = () => {
                    grid = createGrid();
                    setGliderGunPattern(grid);
                    drawGrid(grid);
                };
                initGol();
            }

            // --- Initialize everything ---
            setupBarnsleyFernCanvas();
            setupFloatingCritters();
            setupCritterCorner();
        });
    </script>
</body>
</html>

